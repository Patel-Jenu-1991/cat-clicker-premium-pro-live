"use strict";var model={catList:["chewie","kathy","kitties","liza","lilly","xuca"],cats:[],displayCat:null,init:function(){var t=!0,e=!1,a=void 0;try{for(var i,n=model.catList[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var c=i.value;model.cats.push({name:c,imgUrl:"img/"+c+".jpg",imgAttr:"https://images.google.com?q=cats+"+c+"%2Ejpg",clicks:0})}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}}},octopus={init:function(){model.init(),model.displayCat=model.cats[0],listView.init(),catView.init(),adminView.init()},getCatList:function(){return model.catList},getCats:function(){return model.cats},getDisplayCat:function(){return model.displayCat},renderDisplayCat:function(){catView.render()},setDisplayCat:function(t){model.displayCat=model.cats[Number(t)]},incrementClicks:function(){model.displayCat.clicks++},manageSaveEvent:function(){var t={name:adminView.catName.value,clicks:adminView.catClicks.value,imgAttr:adminView.catAttr.value},e=t.name,a=t.clicks,i=t.imgAttr,n={validateName:null===e.match(/^[A-Za-z]{3,}$/g),validateClicks:null===a.match(/^[0-9]{1,}$/),validateUrl:null===i.match(/https?:\/\/.+/g)},c=n.validateName,l=n.validateClicks,o=n.validateUrl;""===e||""===a||""===i?(adminView.adminError.textContent="",adminView.adminError.textContent="Error: Form not complete!!"):c||l||o?(adminView.adminError.textContent="",adminView.adminError.textContent="Error: Form did not validate!",octopus.toggleAdminPanel(!0)):(adminView.adminError.textContent="",octopus.updateCatData(e,Number(a),i),octopus.toggleAdminPanel(!1))},updateCatData:function(t,e,a){t=t.toLowerCase();var i=document.querySelector("#"+model.displayCat.name+"-item");model.displayCat.name=t,model.displayCat.clicks=e,model.displayCat.imgAttr=a,catView.catDisplayName.textContent="",catView.catDisplayName.textContent=t,catView.catClicks.textContent="",catView.catClicks.textContent=t+" clicks: "+e,i.setAttribute("id",""),i.setAttribute("id",t+"-item"),i.textContent="",i.textContent=t},toggleAdminPanel:function(t){adminView.adminForm.style.display=t?"block":"none"},renderAdminForm:function(){adminView.render()}},listView={menu:null,init:function(){listView.menu=document.querySelector(".cat-menu"),listView.render(),listView.handleClicks()},render:function(){var t=octopus.getCatList(),e=0,a=!0,i=!1,n=void 0;try{for(var c,l=t[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var o=c.value,d=document.createElement("LI");d.setAttribute("class","cat-name"),d.setAttribute("data-cat",""+e),d.setAttribute("id",o+"-item"),d.textContent=o,listView.menu.appendChild(d),e++}}catch(t){i=!0,n=t}finally{try{!a&&l.return&&l.return()}finally{if(i)throw n}}},handleClicks:function(){listView.menu.addEventListener("click",function(t){var e=t.target.dataset.cat;e&&(octopus.setDisplayCat(e),octopus.renderDisplayCat(),octopus.toggleAdminPanel(!1))})}},catView={catClicks:null,catDisplayName:null,catContainer:null,catImage:null,init:function(){catView.catClicks=document.querySelector(".cat-clicks"),catView.catDisplayName=document.querySelector(".cat-display-name"),catView.catContainer=document.querySelector(".cat-container"),catView.catImage=document.createElement("IMG"),catView.catImage.setAttribute("class","cat-image"),catView.render(),catView.handleClicks()},render:function(){var t=octopus.getDisplayCat();catView.catDisplayName.textContent=t.name,catView.catClicks.textContent=t.name+" clicks: "+t.clicks,catView.catImage.setAttribute("src",""),catView.catImage.setAttribute("id",""),catView.catImage.setAttribute("alt",""),catView.catImage.setAttribute("src",t.imgUrl),catView.catImage.setAttribute("id",t.name),catView.catImage.setAttribute("alt",t.name+" the cat on Display!"),catView.catContainer.appendChild(catView.catImage)},handleClicks:function(){catView.catContainer.addEventListener("click",function(t){var e=t.target.id,a=octopus.getDisplayCat();e&&(octopus.incrementClicks(),catView.catClicks.textContent=e+" clicks: "+a.clicks)})}},adminView={admin:null,catName:null,catUrl:null,catClicks:null,adminCancel:null,adminSave:null,adminForm:null,adminError:null,init:function(){adminView.admin=document.querySelector("#admin"),adminView.catName=document.querySelector("#cat-name"),adminView.catAttr=document.querySelector("#cat-img-url"),adminView.catClicks=document.querySelector("#cat-admin-clicks"),adminView.adminCancel=document.querySelector("#admin-cancel"),adminView.adminSave=document.querySelector("#admin-save"),adminView.adminForm=document.querySelector(".admin-form"),adminView.adminError=document.querySelector(".error-message"),adminView.handleAdminFormEvent(),adminView.handleAdminEvent(),adminView.handleCancelEvent(),adminView.handleSaveEvent()},handleAdminFormEvent:function(){adminView.adminForm.addEventListener("submit",function(t){t.preventDefault()}),adminView.adminForm.addEventListener("keydown",function(t){13===t.which&&t.preventDefault()})},handleAdminEvent:function(){adminView.admin.addEventListener("click",function(t){octopus.renderAdminForm(),t.preventDefault()})},handleCancelEvent:function(){adminView.adminCancel.addEventListener("click",function(t){adminView.adminError.textContent="",octopus.toggleAdminPanel(!1),t.preventDefault()})},handleSaveEvent:function(){adminView.adminSave.addEventListener("click",function(t){octopus.manageSaveEvent(),t.preventDefault()})},render:function(){var t=octopus.getDisplayCat();adminView.catName.value=t.name,adminView.catClicks.value=t.clicks,adminView.catAttr.value=t.imgAttr,octopus.toggleAdminPanel(!0)}},i=0,main=document.querySelector(".doc-container"),timeoutId=void 0;main.style.display="none";var fillDots=function t(){var e=document.querySelectorAll("span.dot");e[i].classList.add("fill-dot"),++i!==e.length&&setTimeout(t,3e3)};new Promise(function(t){var e=function(){"loading"!==document.readyState&&t()};document.addEventListener("readystatechange",e),e(),timeoutId=fillDots()}),setTimeout(function(){var t=document.querySelector(".loading-box");document.body.removeChild(t),clearTimeout(timeoutId),octopus.init(),main.style.display="grid"},2e4);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibW9kZWwiLCJjYXRMaXN0IiwiY2F0cyIsImRpc3BsYXlDYXQiLCJpbml0IiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJjYXQiLCJ2YWx1ZSIsInB1c2giLCJuYW1lIiwiaW1nVXJsIiwiaW1nQXR0ciIsImNsaWNrcyIsImVyciIsInJldHVybiIsIm9jdG9wdXMiLCJsaXN0VmlldyIsImNhdFZpZXciLCJhZG1pblZpZXciLCJnZXRDYXRMaXN0IiwiZ2V0Q2F0cyIsImdldERpc3BsYXlDYXQiLCJyZW5kZXJEaXNwbGF5Q2F0IiwicmVuZGVyIiwic2V0RGlzcGxheUNhdCIsIk51bWJlciIsImluY3JlbWVudENsaWNrcyIsIm1hbmFnZVNhdmVFdmVudCIsIl9uYW1lJGNsaWNrcyRpbWdBdHRyIiwiY2F0TmFtZSIsImNhdENsaWNrcyIsImNhdEF0dHIiLCJfdmFsaWRhdGVOYW1lJHZhbGlkYXQiLCJ2YWxpZGF0ZU5hbWUiLCJtYXRjaCIsInZhbGlkYXRlQ2xpY2tzIiwidmFsaWRhdGVVcmwiLCJhZG1pbkVycm9yIiwidGV4dENvbnRlbnQiLCJ0b2dnbGVBZG1pblBhbmVsIiwidXBkYXRlQ2F0RGF0YSIsInRvTG93ZXJDYXNlIiwibGlzdEl0ZW0iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjYXREaXNwbGF5TmFtZSIsInNldEF0dHJpYnV0ZSIsInZpc2libGUiLCJhZG1pbkZvcm0iLCJzdHlsZSIsImRpc3BsYXkiLCJyZW5kZXJBZG1pbkZvcm0iLCJtZW51IiwiaGFuZGxlQ2xpY2tzIiwiaSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIlRBUkdFVCIsInRhcmdldCIsImRhdGFzZXQiLCJjYXRDb250YWluZXIiLCJjYXRJbWFnZSIsImlkIiwiYWRtaW4iLCJjYXRVcmwiLCJhZG1pbkNhbmNlbCIsImFkbWluU2F2ZSIsImhhbmRsZUFkbWluRm9ybUV2ZW50IiwiaGFuZGxlQWRtaW5FdmVudCIsImhhbmRsZUNhbmNlbEV2ZW50IiwiaGFuZGxlU2F2ZUV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ3aGljaCIsIm1haW4iLCJ0aW1lb3V0SWQiLCJmaWxsRG90cyIsImRvdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xhc3NMaXN0IiwiYWRkIiwibGVuZ3RoIiwic2V0VGltZW91dCIsIlByb21pc2UiLCJyZXNvbHZlIiwiY2hlY2tTdGF0ZSIsInJlYWR5U3RhdGUiLCJsb2FkaW5Cb3giLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJjbGVhclRpbWVvdXQiXSwibWFwcGluZ3MiOiJBQUFBLGFBSUEsSUFBSUEsTUFBUSxDQUNWQyxRQUFTLENBQUMsU0FBVSxRQUFTLFVBQVcsT0FBUSxRQUFTLFFBQ3pEQyxLQUFNLEdBQ05DLFdBQVksS0FFWkMsS0FBTSxXQUFNLElBQUFDLEdBQUEsRUFBQUMsR0FBQSxFQUFBQyxPQUFBQyxFQUFBLElBQ1YsSUFBQSxJQUFBQyxFQUFBQyxFQUFrQlYsTUFBTUMsUUFBeEJVLE9BQUFDLGNBQUFQLEdBQUFJLEVBQUFDLEVBQUFHLFFBQUFDLE1BQUFULEdBQUEsRUFBaUMsQ0FBQSxJQUF0QlUsRUFBc0JOLEVBQUFPLE1BQy9CaEIsTUFBTUUsS0FBS2UsS0FBSyxDQUNkQyxLQUFNSCxFQUNOSSxPQUFBQSxPQUFlSixFQUFmLE9BQ0FLLFFBQUFBLG9DQUE2Q0wsRUFBN0MsU0FDQU0sT0FBUSxLQU5GLE1BQUFDLEdBQUFoQixHQUFBLEVBQUFDLEVBQUFlLEVBQUEsUUFBQSxLQUFBakIsR0FBQUssRUFB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blxuLyogZXNsaW50LWRpc2FibGUgKi9cblxubGV0IG1vZGVsID0ge1xuICBjYXRMaXN0OiBbJ2NoZXdpZScsICdrYXRoeScsICdraXR0aWVzJywgJ2xpemEnLCAnbGlsbHknLCAneHVjYSddLFxuICBjYXRzOiBbXSxcbiAgZGlzcGxheUNhdDogbnVsbCxcblxuICBpbml0OiAoKSA9PiB7XG4gICAgZm9yIChjb25zdCBjYXQgb2YgbW9kZWwuY2F0TGlzdCkge1xuICAgICAgbW9kZWwuY2F0cy5wdXNoKHtcbiAgICAgICAgbmFtZTogY2F0LFxuICAgICAgICBpbWdVcmw6IGBpbWcvJHtjYXR9LmpwZ2AsXG4gICAgICAgIGltZ0F0dHI6IGBodHRwczovL2ltYWdlcy5nb29nbGUuY29tP3E9Y2F0cyske2NhdH0lMkVqcGdgLFxuICAgICAgICBjbGlja3M6IDBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxubGV0IG9jdG9wdXMgPSB7XG4gIGluaXQ6ICgpID0+IHtcbiAgICBtb2RlbC5pbml0KCk7XG4gICAgbW9kZWwuZGlzcGxheUNhdCA9IG1vZGVsLmNhdHNbMF07XG4gICAgbGlzdFZpZXcuaW5pdCgpO1xuICAgIGNhdFZpZXcuaW5pdCgpO1xuICAgIGFkbWluVmlldy5pbml0KCk7XG4gIH0sXG5cbiAgZ2V0Q2F0TGlzdDogKCkgPT4ge1xuICAgIHJldHVybiBtb2RlbC5jYXRMaXN0O1xuICB9LFxuXG4gIGdldENhdHM6ICgpID0+IHtcbiAgICByZXR1cm4gbW9kZWwuY2F0cztcbiAgfSxcblxuICBnZXREaXNwbGF5Q2F0OiAoKSA9PiB7XG4gICAgcmV0dXJuIG1vZGVsLmRpc3BsYXlDYXQ7XG4gIH0sXG5cbiAgcmVuZGVyRGlzcGxheUNhdDogKCkgPT4ge1xuICAgIGNhdFZpZXcucmVuZGVyKCk7XG4gIH0sXG5cbiAgc2V0RGlzcGxheUNhdDogKGNhdCkgPT4ge1xuICAgIG1vZGVsLmRpc3BsYXlDYXQgPSBtb2RlbC5jYXRzW051bWJlcihjYXQpXTtcbiAgfSxcblxuICBpbmNyZW1lbnRDbGlja3M6ICgpID0+IHtcbiAgICBtb2RlbC5kaXNwbGF5Q2F0LmNsaWNrcysrO1xuICB9LFxuXG4gIG1hbmFnZVNhdmVFdmVudDogKCkgPT4ge1xuICAgIGNvbnN0IHtuYW1lLCBjbGlja3MsIGltZ0F0dHJ9ID0ge1xuICAgICAgbmFtZTogYWRtaW5WaWV3LmNhdE5hbWUudmFsdWUsXG4gICAgICBjbGlja3M6IGFkbWluVmlldy5jYXRDbGlja3MudmFsdWUsXG4gICAgICBpbWdBdHRyOiBhZG1pblZpZXcuY2F0QXR0ci52YWx1ZVxuICAgIH07XG5cbiAgICBjb25zdCB7dmFsaWRhdGVOYW1lLCB2YWxpZGF0ZUNsaWNrcywgdmFsaWRhdGVVcmx9ID0ge1xuICAgICAgdmFsaWRhdGVOYW1lOiBuYW1lLm1hdGNoKC9eW0EtWmEtel17Myx9JC9nKSA9PT0gbnVsbCxcbiAgICAgIHZhbGlkYXRlQ2xpY2tzOiBjbGlja3MubWF0Y2goL15bMC05XXsxLH0kLykgPT09IG51bGwsXG4gICAgICB2YWxpZGF0ZVVybDogaW1nQXR0ci5tYXRjaCgvaHR0cHM/OlxcL1xcLy4rL2cpID09PSBudWxsXG4gICAgfTtcblxuICAgIGlmIChuYW1lID09PSAnJyB8fCBjbGlja3MgPT09ICcnIHx8IGltZ0F0dHIgPT09ICcnKSB7XG4gICAgICBhZG1pblZpZXcuYWRtaW5FcnJvci50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgYWRtaW5WaWV3LmFkbWluRXJyb3IudGV4dENvbnRlbnQgPSAnRXJyb3I6IEZvcm0gbm90IGNvbXBsZXRlISEnO1xuICAgIH0gZWxzZSBpZiAodmFsaWRhdGVOYW1lIHx8IHZhbGlkYXRlQ2xpY2tzIHx8IHZhbGlkYXRlVXJsKSB7XG4gICAgICBhZG1pblZpZXcuYWRtaW5FcnJvci50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgYWRtaW5WaWV3LmFkbWluRXJyb3IudGV4dENvbnRlbnQgPSAnRXJyb3I6IEZvcm0gZGlkIG5vdCB2YWxpZGF0ZSEnO1xuICAgICAgb2N0b3B1cy50b2dnbGVBZG1pblBhbmVsKHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZG1pblZpZXcuYWRtaW5FcnJvci50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgb2N0b3B1cy51cGRhdGVDYXREYXRhKG5hbWUsIE51bWJlcihjbGlja3MpLCBpbWdBdHRyKTtcbiAgICAgIG9jdG9wdXMudG9nZ2xlQWRtaW5QYW5lbChmYWxzZSk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZUNhdERhdGE6IChuYW1lLCBjbGlja3MsIGltZ0F0dHIpID0+IHtcbiAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7bW9kZWwuZGlzcGxheUNhdC5uYW1lfS1pdGVtYCk7XG4gICAgbW9kZWwuZGlzcGxheUNhdC5uYW1lID0gbmFtZTtcbiAgICBtb2RlbC5kaXNwbGF5Q2F0LmNsaWNrcyA9IGNsaWNrcztcbiAgICBtb2RlbC5kaXNwbGF5Q2F0LmltZ0F0dHIgPSBpbWdBdHRyO1xuICAgIGNhdFZpZXcuY2F0RGlzcGxheU5hbWUudGV4dENvbnRlbnQgPSAnJztcbiAgICBjYXRWaWV3LmNhdERpc3BsYXlOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBjYXRWaWV3LmNhdENsaWNrcy50ZXh0Q29udGVudCA9ICcnO1xuICAgIGNhdFZpZXcuY2F0Q2xpY2tzLnRleHRDb250ZW50ID0gYCR7bmFtZX0gY2xpY2tzOiAke2NsaWNrc31gO1xuICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCAnJyk7XG4gICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdpZCcsIGAke25hbWV9LWl0ZW1gKTtcbiAgICBsaXN0SXRlbS50ZXh0Q29udGVudCA9ICcnO1xuICAgIGxpc3RJdGVtLnRleHRDb250ZW50ID0gbmFtZTtcbiAgfSxcblxuICB0b2dnbGVBZG1pblBhbmVsOiAodmlzaWJsZSkgPT4ge1xuICAgICh2aXNpYmxlKSA/IGFkbWluVmlldy5hZG1pbkZvcm0uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIiA6XG4gICAgICBhZG1pblZpZXcuYWRtaW5Gb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfSxcblxuICByZW5kZXJBZG1pbkZvcm06ICgpID0+IHtcbiAgICBhZG1pblZpZXcucmVuZGVyKCk7XG4gIH1cbn07XG5cblxubGV0IGxpc3RWaWV3ID0ge1xuICBtZW51OiBudWxsLFxuXG4gIGluaXQ6ICgpID0+IHtcbiAgICBsaXN0Vmlldy5tZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdC1tZW51Jyk7XG4gICAgbGlzdFZpZXcucmVuZGVyKCk7XG4gICAgbGlzdFZpZXcuaGFuZGxlQ2xpY2tzKCk7XG4gIH0sXG5cbiAgcmVuZGVyOiAoKSA9PiB7XG4gICAgY29uc3QgY2F0TGlzdCA9IG9jdG9wdXMuZ2V0Q2F0TGlzdCgpO1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IGNhdCBvZiBjYXRMaXN0KSB7XG4gICAgICBjb25zdCBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0xJJyk7XG4gICAgICBsaXN0SXRlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NhdC1uYW1lJyk7XG4gICAgICBsaXN0SXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2F0JywgYCR7aX1gKTtcbiAgICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZSgnaWQnLCBgJHtjYXR9LWl0ZW1gKTtcbiAgICAgIGxpc3RJdGVtLnRleHRDb250ZW50ID0gY2F0O1xuICAgICAgbGlzdFZpZXcubWVudS5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XG4gICAgICBpKys7XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZUNsaWNrczogKCkgPT4ge1xuICAgIGxpc3RWaWV3Lm1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IFRBUkdFVCA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LmNhdDtcbiAgICAgIGlmIChUQVJHRVQpIHtcbiAgICAgICAgb2N0b3B1cy5zZXREaXNwbGF5Q2F0KFRBUkdFVCk7XG4gICAgICAgIG9jdG9wdXMucmVuZGVyRGlzcGxheUNhdCgpO1xuICAgICAgICBvY3RvcHVzLnRvZ2dsZUFkbWluUGFuZWwoZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG5sZXQgY2F0VmlldyA9IHtcbiAgY2F0Q2xpY2tzOiBudWxsLFxuICBjYXREaXNwbGF5TmFtZTogbnVsbCxcbiAgY2F0Q29udGFpbmVyOiBudWxsLFxuICBjYXRJbWFnZTogbnVsbCxcblxuICBpbml0OiAoKSA9PiB7XG4gICAgY2F0Vmlldy5jYXRDbGlja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0LWNsaWNrcycpO1xuICAgIGNhdFZpZXcuY2F0RGlzcGxheU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0LWRpc3BsYXktbmFtZScpO1xuICAgIGNhdFZpZXcuY2F0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdC1jb250YWluZXInKTtcbiAgICBjYXRWaWV3LmNhdEltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnSU1HJyk7XG4gICAgY2F0Vmlldy5jYXRJbWFnZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NhdC1pbWFnZScpO1xuICAgIGNhdFZpZXcucmVuZGVyKCk7XG4gICAgY2F0Vmlldy5oYW5kbGVDbGlja3MoKTtcbiAgfSxcblxuICByZW5kZXI6ICgpID0+IHtcbiAgICBjb25zdCBjYXQgPSBvY3RvcHVzLmdldERpc3BsYXlDYXQoKTtcbiAgICBjYXRWaWV3LmNhdERpc3BsYXlOYW1lLnRleHRDb250ZW50ID0gY2F0Lm5hbWU7XG4gICAgY2F0Vmlldy5jYXRDbGlja3MudGV4dENvbnRlbnQgPSBgJHtjYXQubmFtZX0gY2xpY2tzOiAke2NhdC5jbGlja3N9YDtcbiAgICBjYXRWaWV3LmNhdEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgJycpO1xuICAgIGNhdFZpZXcuY2F0SW1hZ2Uuc2V0QXR0cmlidXRlKCdpZCcsICcnKTtcbiAgICBjYXRWaWV3LmNhdEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJycpO1xuICAgIGNhdFZpZXcuY2F0SW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBjYXQuaW1nVXJsKTtcbiAgICBjYXRWaWV3LmNhdEltYWdlLnNldEF0dHJpYnV0ZSgnaWQnLCBjYXQubmFtZSk7XG4gICAgY2F0Vmlldy5jYXRJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGAke2NhdC5uYW1lfSB0aGUgY2F0IG9uIERpc3BsYXkhYCk7XG4gICAgY2F0Vmlldy5jYXRDb250YWluZXIuYXBwZW5kQ2hpbGQoY2F0Vmlldy5jYXRJbWFnZSk7XG4gIH0sXG5cbiAgaGFuZGxlQ2xpY2tzOiAoKSA9PiB7XG4gICAgY2F0Vmlldy5jYXRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IFRBUkdFVCA9IGV2ZW50LnRhcmdldC5pZCxcbiAgICAgICAgY2F0ID0gb2N0b3B1cy5nZXREaXNwbGF5Q2F0KCk7XG4gICAgICBpZiAoVEFSR0VUKSB7XG4gICAgICAgIG9jdG9wdXMuaW5jcmVtZW50Q2xpY2tzKCk7XG4gICAgICAgIGNhdFZpZXcuY2F0Q2xpY2tzLnRleHRDb250ZW50ID0gYCR7VEFSR0VUfSBjbGlja3M6ICR7Y2F0LmNsaWNrc31gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG5sZXQgYWRtaW5WaWV3ID0ge1xuICBhZG1pbjogbnVsbCxcbiAgY2F0TmFtZTogbnVsbCxcbiAgY2F0VXJsOiBudWxsLFxuICBjYXRDbGlja3M6IG51bGwsXG4gIGFkbWluQ2FuY2VsOiBudWxsLFxuICBhZG1pblNhdmU6IG51bGwsXG4gIGFkbWluRm9ybTogbnVsbCxcbiAgYWRtaW5FcnJvcjogbnVsbCxcblxuICBpbml0OiAoKSA9PiB7XG4gICAgYWRtaW5WaWV3LmFkbWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkbWluJyk7XG4gICAgYWRtaW5WaWV3LmNhdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2F0LW5hbWUnKTtcbiAgICBhZG1pblZpZXcuY2F0QXR0ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXQtaW1nLXVybCcpO1xuICAgIGFkbWluVmlldy5jYXRDbGlja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2F0LWFkbWluLWNsaWNrcycpO1xuICAgIGFkbWluVmlldy5hZG1pbkNhbmNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZG1pbi1jYW5jZWwnKTtcbiAgICBhZG1pblZpZXcuYWRtaW5TYXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkbWluLXNhdmUnKTtcbiAgICBhZG1pblZpZXcuYWRtaW5Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkbWluLWZvcm0nKTtcbiAgICBhZG1pblZpZXcuYWRtaW5FcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci1tZXNzYWdlJyk7XG4gICAgYWRtaW5WaWV3LmhhbmRsZUFkbWluRm9ybUV2ZW50KCk7XG4gICAgYWRtaW5WaWV3LmhhbmRsZUFkbWluRXZlbnQoKTtcbiAgICBhZG1pblZpZXcuaGFuZGxlQ2FuY2VsRXZlbnQoKTtcbiAgICBhZG1pblZpZXcuaGFuZGxlU2F2ZUV2ZW50KCk7XG4gIH0sXG5cbiAgaGFuZGxlQWRtaW5Gb3JtRXZlbnQ6ICgpID0+IHtcbiAgICBhZG1pblZpZXcuYWRtaW5Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICBhZG1pblZpZXcuYWRtaW5Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgIChldmVudC53aGljaCA9PT0gMTMpICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgaGFuZGxlQWRtaW5FdmVudDogKCkgPT4ge1xuICAgIGFkbWluVmlldy5hZG1pbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgb2N0b3B1cy5yZW5kZXJBZG1pbkZvcm0oKTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gIH0sXG5cbiAgaGFuZGxlQ2FuY2VsRXZlbnQ6ICgpID0+IHtcbiAgICBhZG1pblZpZXcuYWRtaW5DYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIGFkbWluVmlldy5hZG1pbkVycm9yLnRleHRDb250ZW50ID0gJyc7XG4gICAgICBvY3RvcHVzLnRvZ2dsZUFkbWluUGFuZWwoZmFsc2UpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgfSxcblxuICBoYW5kbGVTYXZlRXZlbnQ6ICgpID0+IHtcbiAgICBhZG1pblZpZXcuYWRtaW5TYXZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICBvY3RvcHVzLm1hbmFnZVNhdmVFdmVudCgpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgfSxcblxuICByZW5kZXI6ICgpID0+IHtcbiAgICBjb25zdCBjYXQgPSBvY3RvcHVzLmdldERpc3BsYXlDYXQoKTtcbiAgICBhZG1pblZpZXcuY2F0TmFtZS52YWx1ZSA9IGNhdC5uYW1lO1xuICAgIGFkbWluVmlldy5jYXRDbGlja3MudmFsdWUgPSBjYXQuY2xpY2tzO1xuICAgIGFkbWluVmlldy5jYXRBdHRyLnZhbHVlID0gY2F0LmltZ0F0dHI7XG4gICAgb2N0b3B1cy50b2dnbGVBZG1pblBhbmVsKHRydWUpO1xuICB9XG59O1xuXG5sZXQgaSA9IDAsIG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZG9jLWNvbnRhaW5lcicpLCB0aW1lb3V0SWQ7XG5cbm1haW4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuY29uc3QgZmlsbERvdHMgPSAoKSA9PiB7XG4gIGNvbnN0IGRvdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuLmRvdCcpO1xuICBkb3RzW2ldLmNsYXNzTGlzdC5hZGQoJ2ZpbGwtZG90Jyk7XG4gIGkrKztcbiAgaWYgKGkgPT09IGRvdHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNldFRpbWVvdXQoZmlsbERvdHMsIDMwMDApO1xufTtcblxubmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICBjb25zdCBjaGVja1N0YXRlID0gKCkgPT4ge1xuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpIHtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9XG4gIH07XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3JlYWR5c3RhdGVjaGFuZ2UnLCBjaGVja1N0YXRlKTtcbiAgY2hlY2tTdGF0ZSgpO1xuICB0aW1lb3V0SWQgPSBmaWxsRG90cygpO1xufSk7XG5cbnNldFRpbWVvdXQoKCkgPT4ge1xuICBjb25zdCBsb2FkaW5Cb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZGluZy1ib3gnKTtcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsb2FkaW5Cb3gpO1xuICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgb2N0b3B1cy5pbml0KCk7XG4gIG1haW4uc3R5bGUuZGlzcGxheSA9ICdncmlkJztcbn0sIDIwMDAwKTtcbiJdfQ==
